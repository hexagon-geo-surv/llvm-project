# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py UTC_ARGS: --version 5
# RUN: llc -mtriple=amdgcn -run-pass none -o - %s | FileCheck %s
#
# This test ensures that the MIR parser parses fence parameters correctly.
# We can see some canonicalization in the roundtrip.

---
name:            foo
body: |
  bb.0.entry:

    ; CHECK-LABEL: name: foo
    ; CHECK: S_WAITCNT_FENCE_soft .release, .workgroup, .flat
    ; CHECK-NEXT: S_WAITCNT_FENCE_soft .monotonic, .system, .none
    ; CHECK-NEXT: S_WAITCNT_FENCE_soft .acquire, .none, .none
    ; CHECK-NEXT: S_WAITCNT_FENCE_soft .release, .none, .global.scratch
    ; CHECK-NEXT: S_WAITCNT_FENCE_soft .acquire, .agent, .lds
    ; CHECK-NEXT: S_WAITCNT_FENCE_soft .not_atomic, .wavefront, .atomic
    ; CHECK-NEXT: S_WAITCNT_FENCE_soft .release, .system, .global.scratch
    ; CHECK-NEXT: S_WAITCNT_FENCE_soft .acquire, .system, .atomic
    S_WAITCNT_FENCE_soft .release, .workgroup, .global.lds.scratch
    S_WAITCNT_FENCE_soft .monotonic, .system, .none
    S_WAITCNT_FENCE_soft .acquire, .none, .none
    S_WAITCNT_FENCE_soft .release, .none, .scratch.global
    S_WAITCNT_FENCE_soft .acquire, .agent, .lds
    S_WAITCNT_FENCE_soft .not_atomic, .wavefront, .atomic
    S_WAITCNT_FENCE_soft 5, 5, 5
    S_WAITCNT_FENCE_soft 4, 5, 15
...
